# Библиотека для работы с дисплеем МЭЛТ MT-16S2H через SPI

См. описание дисплея: https://www.melt.com.ru/docs/MT-16S2H.pdf

Библиотека предназначена для микроконтроллеров AVR. Тестировалась на микроконтроллере atmega328p.

Дисплей подключается к сдвиговому регистру (74HC595) согласно следующей таблице . Микроконтроллер управляет дисплеем через него. Дисплей работает в 4-битном режиме.

| Выводы сдвигового регистра | Q7   | Q6   | Q5   | Q4   | Q3   | Q2   | Q1   | Q0   |
| -------------------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| Ноги дисплея               | -    | -    | E    | RS   | D7   | D6   | D5   | D4   |

Библиотека работает со сдвиговым регистром через аппаратный SPI. Таким образом, ноги DS и SH_CP сдвигового регистра соединяются с ногами MOSI и CLK микроконтроллера соответственно. Считается, что SPI микроконтроллера работает в режиме master.

## Как инициализировать дисплей?

```c
void setup_MELT_Display(volatile uint8_t* CS_port, uint8_t CS_pin)
```

Функция ***setup_MELT_Display*** выполняет инициализацию дисплея. CS_port - указатель на порт, CS_pin номер ноги, куда подключена "защелка" (ST_CP на регистре сдвига).

Пример применения. "Защелка" соединена с портом PB1.

```c
setup_MELT_Display(&PORTB, 1);
```

